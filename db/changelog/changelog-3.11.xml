<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="3.11-avoynov-1" author="avoynov">
        <insert tableName="configuration">
            <column name="code" value="DEPARTMENT_FOR_APP_2"/>
            <column name="department_id" value="0"/>
            <column name="value" value="77"/>
        </insert>
    </changeSet>

    <!-- https://jira.aplana.com/browse/SBRFNDFL-8761 Реализовать определение настроек подразделений для КНФ с типом "КНФ для Приложения 2" -->
    <changeSet id="3.11-avoynov-2" author="avoynov" runAlways="true">
        <update tableName="DECL_TEMPLATE_EVENT_SCRIPT">
            <column name="script" valueClobFile="templates-3.11/ndfl/consolidated_rnu_ndfl/v2016/consolidated_rnu_ndfl_calculate.groovy"/>
            <where>DECLARATION_TEMPLATE_ID = 101 and EVENT_ID = 3</where>
        </update>
    </changeSet>

    <!-- https://jira.aplana.com/browse/SBRFNDFL-8855 Изменить фатальность проверки 2-НДФЛ "Сравнение сумм удержанного и перечисленного налогов" -->
    <changeSet id="3.11-mchernyakov-1" author="mchernyakov" runAlways="true">
    <update tableName="DECL_TEMPLATE_EVENT_SCRIPT">
            <column name="script" valueClobFile="templates-3.11/ndfl/report_2ndfl_1/v2016/report_2ndfll_check.groovy"/>
            <where>DECLARATION_TEMPLATE_ID = 102 and EVENT_ID = 5</where>
        </update>
        <update tableName="DECL_TEMPLATE_EVENT_SCRIPT">
            <column name="script" valueClobFile="templates-3.11/ndfl/report_2ndfl_1/v2016/report_2ndfll_check.groovy"/>
            <where>DECLARATION_TEMPLATE_ID = 104 and EVENT_ID = 5</where>
        </update>
    </changeSet>


</databaseChangeLog>
