<div id="refbook">
    <h1>{{'refbookTitle' | translate}} &quot;{{refbookTitle}}&quot;</h1>
    <!-- Панель фильтрации -->
    <div class="grid-filter">
        <div data-aplana-collapse
             data-is-collapsed="false"
             data-label="'filterPanelLabel' | translate">

            <form class="form-horizontal" role="form" novalidate>
                <div ng-switch="refbookName">
                    <div ng-switch-when="Region">
                        <div class="row">
                            <div class="filter-col" style="width:350px">
                                <data-macro-region-widget
                                        ng-model="dataOptions.filter.macroRegion"/>
                                <data-deleted-filter
                                        ng-model="dataOptions.filter.deleted"/>
                            </div>
                            <div class="filter-col" style="width:350px">
                                <data-fulltext-filter
                                        ng-model="dataOptions.filter.fulltext"
                                        data-ng-disabled="!fulltextFilterEnabled"/>
                            </div>
                            <div class="filter-col">
                                <data-search-clear-buttons
                                        on-search="searchButtonClick()"
                                        on-clear="clearButtonClick()"/>
                            </div>
                        </div>
                    </div>
                    <div ng-switch-when="Specification">
                        <div class="row">
                            <div class="filter-col" style="width: 350px">
                                <data-vendor-widget
                                        ng-model="dataOptions.filter.vendor"/>
                                <data-deleted-filter
                                        ng-model="dataOptions.filter.deleted"/>
                            </div>
                            <div class="filter-col" style="width:400px">
                                <data-tariff-widget
                                        label-class="col-md-4"
                                        input-class="col-md-8"
                                        ng-model="dataOptions.filter.tariff"
                                        light="true"/>
                                <data-fulltext-filter
                                        label-class="col-md-4"
                                        input-class="col-md-8"
                                        ng-model="dataOptions.filter.fulltext"
                                        data-ng-disabled="!fulltextFilterEnabled"/>
                            </div>
                            <div class="filter-col">
                                <data-search-clear-buttons
                                        on-search="searchButtonClick()"
                                        on-clear="clearButtonClick()"/>
                            </div>
                        </div>
                    </div>
                    <div ng-switch-when="Profile">
                        <div class="row">
                            <div class="filter-col" style="width: 400px">
                                <data-vendor-widget
                                        ng-model="dataOptions.filter.vendor"/>
                                <data-card-type-widget
                                        ng-model="dataOptions.filter.cardType"/>
                                <data-deleted-filter
                                        ng-model="dataOptions.filter.deleted"/>
                            </div>
                            <div class="filter-col" style="width:500px">
                                <data-tariff-widget
                                        label-class="col-md-5"
                                        input-class="col-md-7"
                                        ng-model="dataOptions.filter.tariff"
                                        light="true"/>
                                <data-fulltext-filter
                                        label-class="col-md-5"
                                        input-class="col-md-7"
                                        ng-model="dataOptions.filter.fulltext"
                                        data-ng-disabled="!fulltextFilterEnabled"/>
                                <data-auth-algorythm-widget
                                        label-class="col-md-5"
                                        input-class="col-md-7"
                                        ng-model="dataOptions.filter.authAlgorythm"/>
                            </div>
                            <div class="filter-col">
                                <data-search-clear-buttons
                                        on-search="searchButtonClick()"
                                        on-clear="clearButtonClick()"/>
                            </div>
                        </div>
                    </div>
                    <div ng-switch-when="Tariff">
                        <div class="row">
                            <div class="filter-col" style="width: 400px">
                                <data-card-type-widget
                                        ng-model="dataOptions.filter.cardType"/>
                                <data-deleted-filter
                                        ng-model="dataOptions.filter.deleted"/>
                            </div>
                            <div class="filter-col" style="width:350px">
                                <data-fulltext-filter
                                        ng-model="dataOptions.filter.fulltext"
                                        data-ng-disabled="!fulltextFilterEnabled"/>
                              </div>
                            <div class="filter-col">
                                <data-search-clear-buttons
                                        on-search="searchButtonClick()"
                                        on-clear="clearButtonClick()"/>
                            </div>
                        </div>
                    </div>
                    <div ng-switch-when="AuthAlgorythm">
                        <div class="row">
                            <div class="filter-col" style="width:350px">
                                <data-region-widget
                                        ng-model="dataOptions.filter.region"
                                        light="true"/>
                                <data-deleted-filter
                                        ng-model="dataOptions.filter.deleted"/>
                            </div>
                            <div class="filter-col" style="width:350px">
                                <data-fulltext-filter
                                        ng-model="dataOptions.filter.fulltext"
                                        data-ng-disabled="!fulltextFilterEnabled"/>
                            </div>
                            <div class="filter-col">
                                <data-search-clear-buttons
                                        on-search="searchButtonClick()"
                                        on-clear="clearButtonClick()"/>
                            </div>
                        </div>
                    </div>
                    <div ng-switch-when="Code">
                        <div class="row">
                            <div class="filter-col" style="width:350px">
                                <data-macro-region-widget
                                        ng-model="dataOptions.filter.macroRegion"/>
                                <data-deleted-filter
                                        ng-model="dataOptions.filter.deleted"/>
                            </div>
                            <div class="filter-col" style="width:400px">
                                <data-tariff-widget
                                        label-class="col-md-4"
                                        input-class="col-md-8"
                                        ng-model="dataOptions.filter.tariff"
                                        light="true"/>
                                <data-fulltext-filter
                                        label-class="col-md-4"
                                        input-class="col-md-8"
                                        ng-model="dataOptions.filter.fulltext"
                                        data-ng-disabled="!fulltextFilterEnabled"/>
                            </div>
                            <div class="filter-col">
                                <data-search-clear-buttons
                                        on-search="searchButtonClick()"
                                        on-clear="clearButtonClick()"/>
                            </div>
                        </div>
                    </div>
                    <div ng-switch-when="Delivery">
                        <div class="row">
                            <div class="filter-col" style="width:350px">
                                <data-region-widget
                                        ng-model="dataOptions.filter.region"
                                        light="true"/>
                                <data-vendor-widget
                                        ng-model="dataOptions.filter.vendor"/>
                                <data-deleted-filter
                                        ng-model="dataOptions.filter.deleted"/>
                            </div>
                            <div class="filter-col" style="width:450px">
                                <data-transport-company-widget
                                        label-class="col-md-5"
                                        input-class="col-md-7"
                                        ng-model="dataOptions.filter.transportCompany"/>
                                <data-fulltext-filter
                                        label-class="col-md-5"
                                        input-class="col-md-7"
                                        ng-model="dataOptions.filter.fulltext"
                                        data-ng-disabled="!fulltextFilterEnabled"/>
                            </div>
                            <div class="filter-col">
                                <data-search-clear-buttons
                                        on-search="searchButtonClick()"
                                        on-clear="clearButtonClick()"/>
                            </div>
                        </div>
                    </div>
                    <div ng-switch-when="MacroRegion">
                        <div class="row">
                            <div class="filter-col" style="width:350px">
                                <data-deleted-filter
                                        ng-model="dataOptions.filter.deleted"/>
                            </div>
                            <div class="filter-col" style="width:350px">
                                <data-fulltext-filter
                                        ng-model="dataOptions.filter.fulltext"
                                        data-ng-disabled="!fulltextFilterEnabled"
                                />
                            </div>
                            <div class="filter-col">
                                <data-search-clear-buttons
                                        on-search="searchButtonClick()"
                                        on-clear="clearButtonClick()"/>
                            </div>
                        </div>
                    </div>
                    <div ng-switch-when="Price">
                        <div class="row">
                            <div class="filter-col" style="width:350px">
                                <data-macro-region-widget
                                        ng-model="dataOptions.filter.macroRegion"/>
                                <data-vendor-widget
                                        ng-model="dataOptions.filter.vendor"/>
                                <data-deleted-filter
                                        ng-model="dataOptions.filter.deleted"/>
                            </div>
                            <div class="filter-col" style="width:400px">
                                <data-tariff-widget
                                        label-class="col-md-4"
                                        input-class="col-md-8"
                                        ng-model="dataOptions.filter.tariff"/>
                                <data-card-type-widget
                                        label-class="col-md-4"
                                        input-class="col-md-8"
                                        depends-on="tariffId"
                                        depends-on-value="dataOptions.filter.tariff"
                                        ng-model="dataOptions.filter.cardType"/>
                                <data-fulltext-filter
                                        label-class="col-md-4"
                                        input-class="col-md-8"
                                        ng-model="dataOptions.filter.fulltext"
                                        data-ng-disabled="!fulltextFilterEnabled"
                                />
                            </div>
                            <div class="filter-col">
                                <data-search-clear-buttons
                                        on-search="searchButtonClick()"
                                        on-clear="clearButtonClick()"/>
                            </div>
                        </div>
                    </div>
                    <div ng-switch-default>
                        <div class="row">
                            <div class="filter-col" style="width:350px">
                                <data-deleted-filter
                                        ng-model="dataOptions.filter.deleted"/>
                            </div>
                            <div class="filter-col" style="width:350px">
                                <data-fulltext-filter
                                        ng-model="dataOptions.filter.fulltext"
                                        data-ng-disabled="!fulltextFilterEnabled"/>
                            </div>
                            <div class="filter-col">
                                <data-search-clear-buttons
                                        on-search="searchButtonClick()"
                                        on-clear="clearButtonClick()"/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!-- Панель кнопок над таблицей -->
    <div class="button_panel">
        <div class="btn-toolbar" role="toolbar">
            <div class="btn-group" role="group" id="refbook-btn-group">
                <button type="button" class="btn btn-default" data-ng-click="addNewRecordClick()"
                        data-ng-check-operation="['REF_BOOK_CREATE']">
                    <img src="img/button/enable/new.png" width="32px" height="22px"
                         alt="{{'addNewRecord' | translate}}"/>
                    {{'addNewRecord' | translate}}
                </button>
                <span data-ng-check-operation="['REF_BOOK_LOCK_UNLOCK']">
                    <button type="button" class="btn btn-default" data-ng-click="lockRecordClick()"
                            data-ng-show="gridApi.grid.selection.selectedCount == 1 && !currentEntityView.deleted">
                        <img src="img/button/enable/delete.png" width="32px" height="22px"
                             alt="{{'lockRecord' | translate}}"/>
                        {{'lockRecord' | translate}}
                    </button>
                    <button type="button" class="btn btn-default" data-ng-click="unlockRecordClick()"
                            data-ng-show="gridApi.grid.selection.selectedCount == 1 && currentEntityView.deleted">
                        <img src="img/button/enable/reconcile.png" width="32px" height="22px"
                             alt="{{'unlockRecord' | translate}}"/>
                        {{'unlockRecord' | translate}}
                    </button>
                </span>
                <button type="button" class="btn btn-default" data-ng-click="exportDataClick()"
                        data-ng-check-operation="['REF_BOOK_EXPORT']">
                    <img src="img/button/enable/export.png" width="32px" height="22px"
                         alt="{{'exportData' | translate}}"/>
                    {{'exportData' | translate}}
                </button>
                <button type="button" class="btn btn-default" data-ng-click="importDataButtonClick()"
                        data-ng-show="showImportButton" data-ng-disabled="!importButtonEnabled">
                    <img src="img/button/{{importButtonEnabled ? 'enable' : 'disable'}}/import_xls.png" width="32px" height="22px"
                         alt="{{'common.button.import.xls' | translate}}"/>
                    {{'common.button.import.xls' | translate}}
                </button>
            </div>
            <span class="right" data-ng-check-operation="['REF_BOOK_UPDATE']">
                <div class="btn-group" role="group" id="refbook-right-btn-group">
                    <button type="button" class="btn btn-default" data-ng-click="editRecordClick()"
                            data-ng-hide="editMode || tempEntityData.id == null">
                        <img src="img/button/enable/edit.png" width="32px" height="22px"
                             alt="{{'editRecord' | translate}}"/>
                        {{'editRecord' | translate}}
                    </button>
                    <button type="button" class="btn btn-default"
                            data-ng-click="saveRecordClick()"
                            data-ng-show="editMode"
                            data-ng-disabled="refBookEditForm.$invalid || refBookEditForm.$pristine">
                        <img src="img/button/{{refBookEditForm.$valid && refBookEditForm.$dirty ? 'enable' : 'disable'}}/save.png"
                             width="32px" height="22px"
                             alt="{{'saveRecord' | translate}}"/>
                        {{'saveRecord' | translate}}
                    </button>
                    <button type="button" class="btn btn-default" data-ng-click="cancelRecordClick()"
                            data-ng-show="editMode">
                        <img src="img/button/enable/cancel.png" width="32px" height="22px"
                             alt="{{'cancelRecord' | translate}}"/>
                        {{'cancelRecord' | translate}}
                    </button>
                </div>
            </span>
        </div>
    </div>
    <!-- Таблица -->
    <div id="refbook-content">
        <!-- Панель редактирования\просмотра записи -->
        <div id="refbook-edit-panel">
            <div data-ng-show="gridApi.grid.selection.selectedCount == 1 || editMode">
                <form id="editForm" class="form-horizontal"
                      name="refBookEditForm"
                      novalidate
                      data-ng-show="editMode">
                </form>
                <form id="showForm" class="form-horizontal"
                      name="refBookShowForm"
                      novalidate
                      data-ng-hide="editMode">
                </form>
            </div>
        </div>
        <div id="refbook-grid" data-ui-grid="gridOptions"
             ui-grid-resize-columns
             ui-grid-selection
             ui-grid-pagination
             ui-gitd-autoResize
                >
        </div>
    </div>
</div>
