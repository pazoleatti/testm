<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
             xmlns:g="urn:import:com.google.gwt.user.client.ui"
             xmlns:picker="urn:import:com.aplana.sbrf.taxaccounting.web.widget.departmentpicker"
             xmlns:pager="urn:import:com.aplana.sbrf.taxaccounting.web.widget.pager"
             xmlns:style="urn:import:com.aplana.sbrf.taxaccounting.web.widget.style"
             xmlns:fm="urn:import:com.aplana.gwt.client.form"
             xmlns:r='urn:import:com.aplana.sbrf.taxaccounting.web.widget.refbookmultipicker.client'>

    <ui:style>
        .header {
            font-size: 14px;
            color:  #636460;
        }

        .scroll {
            position: absolute !important;
            bottom: 30px;
            right: 0px;
            left: 10px;
            top: 0px;
        }

        .separator {
            height: 22px;
            margin: 0 9px;
            border-right: 1px solid #aeaeac;
        }

        .pager {
            position: absolute;
            bottom: 0;
            right: 0;
        }

        .findButton{
            margin-right: 5px;
        }

        .editButton{
            margin-left: 5px;
            right: 5px;
        }

        .splitter {
            position: absolute !important;
            bottom: 0;
            right: 0;
            left: 0;
            top: 34px;
            border-top: 1px solid #aeaeac;
        }

        .editFields {
            width: 320px;
            min-width: 150px;
            margin-left: 5px;
        }

        .leftLabel {
            width: 160px;
            min-width: 160px;
        }

        .saveCancel {
            position: absolute;
            bottom: 0;
            border-top: 1px solid #aeaeac;
        }
    </ui:style>

    <fm:MainContainer>
        <fm:header>
            <fm:HeaderContainer>
                <fm:left>
                    <fm:Left>
                        <style:LeftBar childValign="middle" height="100%">
                            <g:Label text="Администрирование" addStyleNames="{style.header}"/>
                            <g:Label text="—" addStyleNames="{style.header}"/>
                        </style:LeftBar>
                    </fm:Left>
                </fm:left>
                <fm:right>
                    <fm:Right>
                        <style:LeftBar childValign="middle" height="100%">
                            <style:LinkAnchor ui:field="printButton" text="Выгрузить в xlsx"
                                              img="resources/img/printer-16.png"
                                              title="Отобразить печатное представление документа"/>
                        </style:LeftBar>
                    </fm:Right>
                </fm:right>
                <fm:resizable>
                    <fm:Resizable>
                        <g:Label text="Пользователи системы"/>
                    </fm:Resizable>
                </fm:resizable>
            </fm:HeaderContainer>
        </fm:header>
        <fm:body>
            <fm:BodyContainer>
                <g:HorizontalPanel spacing="5" verticalAlignment="middle" height="30px" width="100%">
                    <g:cell verticalAlignment="middle">
                        <style:LinkButton title="Добавить пользователя" text="Добавить пользователя" ui:field="addButton" img="resources/img/row-add.png"/>
                    </g:cell>

                    <g:cell verticalAlignment="middle">
                        <g:HTML ui:field="addButtonSeparator" addStyleNames="{style.separator}"/>
                    </g:cell>

                    <g:cell horizontalAlignment="right">
                        <g:Label width="100px" text="Подразделение:"/>
                    </g:cell>
                    <g:cell width="20%">
                        <picker:DepartmentPickerPopupWidget ui:field="departmentPicker" multiselection="true" width="100%"/>
                    </g:cell>
                    <g:cell horizontalAlignment="right">
                        <g:Label width="40px" text="Роль:"/>
                    </g:cell>
                    <g:cell width="20%">
                        <r:RefBookPickerWidget ui:field="role" attributeIdInt="838" isHierarchical="false" width="100%"
                                                             multiSelect="true" versionEnabled="false"/>
                    </g:cell>
                    <g:cell horizontalAlignment="right">
                        <g:Label width="135px" wordWrap="false" text="Признак активности:"/>
                    </g:cell>
                    <g:cell width="20%">
                        <g:ValueListBox width="100%" ui:field="isActiveBox"/>
                    </g:cell>
                    <g:cell horizontalAlignment="right">
                        <g:Label width="120px" wordWrap="false" text="Имя пользователя:"/>
                    </g:cell>
                    <g:cell width="20%">
                        <g:TextBox width="100%" ui:field="userName"/>
                    </g:cell>

                    <g:cell verticalAlignment="middle">
                        <g:HTML addStyleNames="{style.separator}"/>
                    </g:cell>

                    <g:cell verticalAlignment="middle">
                        <g:Button title="Найти" text="Найти" addStyleNames="{style.findButton}" ui:field="applyButton"/>
                    </g:cell>

                    <g:cell verticalAlignment="middle">
                        <g:Button title="Завершить редактирование" text="Завершить редактирование"
                              ui:field="cancelEdit" visible="false"/>
                    </g:cell>

                    <g:cell verticalAlignment="middle">
                        <style:LinkButton title="Редактировать" text="Редактировать" addStyleNames="{style.editButton}" ui:field="edit" img="resources/img/pencil-16.png"/>
                    </g:cell>

                </g:HorizontalPanel>

                <g:SplitLayoutPanel ui:field="tablePanel" addStyleNames="{style.splitter}">
                    <g:center>
                        <g:SimplePanel>
                            <g:HTMLPanel>
                                <g:ResizeLayoutPanel addStyleNames="{style.scroll}">
                                    <style:GenericDataGrid ui:field="taUserFullCellTable" width="100%" height="100%" enabled="true"/>
                                </g:ResizeLayoutPanel>
                                <pager:FlexiblePager ui:field="pager" location="CENTER" addStyleNames="{style.pager}"
                                                     showFastForwardButton="false" fastForwardRows="0"
                                                     showLastPageButton="true" type="members"/>
                            </g:HTMLPanel>
                        </g:SimplePanel>
                    </g:center>
                    <g:east size="500">
                        <g:SimplePanel>
                            <g:HTMLPanel>
                                <g:VerticalPanel height="100%">
                                    <g:VerticalPanel spacing="10" >
                                        <g:HorizontalPanel>
                                            <g:cell horizontalAlignment="right" verticalAlignment="middle">
                                                <g:Label text="Полное имя пользователя:" addStyleNames="{style.leftLabel}"/>
                                            </g:cell>
                                            <g:cell horizontalAlignment="left" verticalAlignment="middle">
                                                <g:TextBox ui:field="name" addStyleNames="{style.editFields}"/>
                                            </g:cell>
                                        </g:HorizontalPanel>

                                        <g:HorizontalPanel>
                                            <g:cell horizontalAlignment="right" verticalAlignment="middle">
                                                <g:Label text="Логин:" addStyleNames="{style.leftLabel}"/>
                                            </g:cell>
                                            <g:cell horizontalAlignment="left" verticalAlignment="middle">
                                                <g:TextBox ui:field="userLogin" addStyleNames="{style.editFields}"/>
                                            </g:cell>
                                        </g:HorizontalPanel>

                                        <g:HorizontalPanel>
                                            <g:cell horizontalAlignment="right" verticalAlignment="middle">
                                                <g:Label text="Электронная почта:" addStyleNames="{style.leftLabel}"/>
                                            </g:cell>
                                            <g:cell horizontalAlignment="left" verticalAlignment="middle">
                                                <g:TextBox ui:field="userMail" addStyleNames="{style.editFields}"/>
                                            </g:cell>
                                        </g:HorizontalPanel>

                                        <g:HorizontalPanel>
                                            <g:cell horizontalAlignment="right" verticalAlignment="middle">
                                                <g:Label text="Признак активности:" addStyleNames="{style.leftLabel}"/>
                                            </g:cell>
                                            <g:cell horizontalAlignment="left" verticalAlignment="middle">
                                                <g:CheckBox ui:field="userActive" addStyleNames="{style.editFields}"/>
                                            </g:cell>
                                        </g:HorizontalPanel>

                                        <g:HorizontalPanel>
                                            <g:cell horizontalAlignment="right" verticalAlignment="middle">
                                                <g:Label text="Подразделение:" addStyleNames="{style.leftLabel}"/>
                                            </g:cell>
                                            <g:cell horizontalAlignment="left" verticalAlignment="middle">
                                                <picker:DepartmentPickerPopupWidget ui:field="userDepartmentPicker" multiselection="false" addStyleNames="{style.editFields}"/>
                                            </g:cell>
                                        </g:HorizontalPanel>

                                        <g:HorizontalPanel>
                                            <g:cell horizontalAlignment="right" verticalAlignment="middle">
                                                <g:Label text="Роль:" addStyleNames="{style.leftLabel}"/>
                                            </g:cell>
                                            <g:cell horizontalAlignment="left" verticalAlignment="middle">
                                                <r:RefBookPickerWidget ui:field="userRole" attributeIdInt="838" isHierarchical="false"
                                                                       multiSelect="true" versionEnabled="false" addStyleNames="{style.editFields}"/>
                                            </g:cell>
                                        </g:HorizontalPanel>

                                        <g:HorizontalPanel>
                                            <g:cell horizontalAlignment="right" verticalAlignment="middle">
                                                <g:Label text="АСНУ:" addStyleNames="{style.leftLabel}"/>
                                            </g:cell>
                                            <g:cell horizontalAlignment="left" verticalAlignment="middle">
                                                <r:RefBookPickerWidget ui:field="userAsnu" attributeIdInt="9003" isHierarchical="false"
                                                                       multiSelect="true" versionEnabled="false" addStyleNames="{style.editFields}"/>
                                            </g:cell>
                                        </g:HorizontalPanel>

                                    </g:VerticalPanel>

                                    <g:HorizontalPanel ui:field="buttonBlock" height="30px" width="100%" spacing="5" addStyleNames="{style.saveCancel}">
                                        <g:cell width="50%" horizontalAlignment="right">
                                            <g:Button ui:field="save" enabled="true" text="Сохранить" width="80px"/>
                                        </g:cell>
                                        <g:cell width="50%" horizontalAlignment="left">
                                            <g:Button ui:field="cancel" enabled="false" text="Отменить" width="80px"/>
                                        </g:cell>
                                    </g:HorizontalPanel>
                                </g:VerticalPanel>
                            </g:HTMLPanel>
                        </g:SimplePanel>
                    </g:east>
                </g:SplitLayoutPanel>
            </fm:BodyContainer>
        </fm:body>
    </fm:MainContainer>


</ui:UiBinder>