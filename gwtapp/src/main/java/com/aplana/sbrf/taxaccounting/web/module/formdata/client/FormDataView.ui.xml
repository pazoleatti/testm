<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
             xmlns:g="urn:import:com.google.gwt.user.client.ui"
             xmlns:style="urn:import:com.aplana.sbrf.taxaccounting.web.widget.style"
             xmlns:pager="urn:import:com.aplana.sbrf.taxaccounting.web.widget.pager"
             xmlns:fileuplod="urn:import:com.aplana.sbrf.taxaccounting.web.widget.fileupload"
             xmlns:fm="urn:import:com.aplana.gwt.client.form"
        >

    <ui:style>

        .titleText {
            font-size: 14px !important;
            color: #636460;
            white-space: nowrap;
        }

        .titleText div {
            font-size: 14px !important;
        }

        .infoPanel {
            padding: 5px 25px 0 30px;
        }

        .editMode {
            color: #aeaeac;
        }

        .headerAttr {
            font-size: 12px;
            font-weight: bold;
            max-height: 54px;
            overflow: hidden;
        }

        .depAttr{
            line-height: 17px;
        }

        .headerAttrName {
            font-size: 12px;
            line-height: 17px;
        }

        .reportPeriodLabel {
            font-size: 12px;
            font-weight: bold;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            -ms-text-overflow: ellipsis;
        }

        .depatmentBlock {
            max-width: 560px;
            min-width: 350px;
        }

        .centerBlock {
            padding-left: 5px;
        }

        .infoValuesBlock {
            min-width: 100px;
        }

        .btnPanel {
            padding-left: 7px;
            height: 23px;
        }

        .btnPanel td{
           vertical-align: middle !important;
        }

        .showCheckedColumns {
            font-size: 12px;
            padding-right: 10px;
            white-space: nowrap;
        }

        .table {
            position: absolute !important;
            bottom: 30px;
            right: 0;
            left: 0;
            top: 104px;     /*@see com.aplana.sbrf.taxaccounting.web.module.formdata.client.FormDataView.DEFAULT_TABLE_TOP_POSITION"*/
        }

        .pager {
            position: absolute;
            bottom: 0;
            right: 0;
        }

        .horSep {
            height: 1px;
            margin: 4px 9px;
            border-top: 1px solid #aeaeac;
        }

        .verSep {
            height: 22px;
            margin: 0 9px;
            border-right: 1px solid #aeaeac;
        }

        .btnMarginRight{
            margin-right: 9px;
        }

        .marginRight5{
            margin-right: 5px;
        }

    </ui:style>

    <ui:style field="lockInformationStyle">
        .lockInformation {
            height: 25px;   /*@see com.aplana.sbrf.taxaccounting.web.module.formdata.client.FormDataView.LOCK_INFO_BLOCK_HEIGHT*/
            line-height: 24px;
            background: #FFDC82;
            padding-left: 15px;
            margin: 2px;
            font-size: 14px;
            border: 1px solid #DBDBDB;

            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            -ms-text-overflow: ellipsis;
        }
    </ui:style>
    
    <ui:with field="formDataProvider" type="com.aplana.sbrf.taxaccounting.web.module.formdata.client.FormDataView"/>

    <fm:MainContainer>
        <fm:header>
            <fm:HeaderContainer>
                <fm:left>
                    <fm:Left>
                        <style:LeftBar marginRight="5" childValign="middle" height="100%">
                            <style:LinkAnchor title="Перейти к списку налоговых форм" ui:field="returnAnchor"
                                              disableImage="true" addStyleNames="{style.titleText}"/>
                            <g:Label text="—" addStyleNames="{style.titleText}"/>
                        </style:LeftBar>
                    </fm:Left>
                </fm:left>
                <fm:right>
                    <fm:Right>
                        <style:LeftBar marginRight="5" childValign="middle" height="100%">
                            <g:Label ui:field="editModeLabel" text="Режим редактирования"
                                     addStyleNames="{style.editMode}, {style.marginRight5}"/>
                            <fileuplod:FileUploadWidget ui:field="fileUploader" width="185px"/>
                        </style:LeftBar>
                    </fm:Right>
                </fm:right>
                <fm:resizable>
                    <fm:Resizable>
                        <g:Label ui:field="title"/>
                    </fm:Resizable>
                </fm:resizable>
            </fm:HeaderContainer>
        </fm:header>

        <fm:body>
            <fm:BodyContainer>

                <g:HorizontalPanel width="100%" addStyleNames="{style.infoPanel}">
                    <!--Подразделение. Левая часть-->
                    <g:cell>
                        <g:HorizontalPanel spacing="2" height="58px" addStyleNames="{style.depatmentBlock}">
                            <g:cell width="95px">
                                <g:Label text="Подразделение:" addStyleNames="{style.headerAttrName}"/>
                            </g:cell>
                            <g:cell horizontalAlignment="left">
                                <g:Label ui:field="departmentIdLabel" addStyleNames="{style.headerAttr}, {style.depAttr}"/>
                            </g:cell>
                        </g:HorizontalPanel>
                    </g:cell>
                    <!--Инфо по форме. Середина-->
                    <g:cell horizontalAlignment="left" width="90%">
                        <g:HorizontalPanel ui:field="centerBlock" height="58px" addStyleNames="{style.centerBlock}" >
                            <g:cell width="145px" >
                                <g:VerticalPanel spacing="2" horizontalAlignment="right" width="145px">
                                    <g:Label text="Тип налоговой формы:" addStyleNames="{style.headerAttrName}"/>
                                    <g:Label text="Период:" addStyleNames="{style.headerAttrName}"/>
                                    <g:Label text="Состояние:" addStyleNames="{style.headerAttrName}"/>
                                </g:VerticalPanel>
                            </g:cell>
                            <g:cell>
                                <g:VerticalPanel spacing="2" addStyleNames="{style.infoValuesBlock}">
                                    <g:Label ui:field="formKindLabel" addStyleNames="{style.headerAttr}, {style.depAttr} "/>
                                    <g:Label ui:field="reportPeriodLabel" addStyleNames="{style.reportPeriodLabel}, {style.depAttr}"/>
                                    <g:Label ui:field="stateLabel" addStyleNames="{style.headerAttr}, {style.depAttr}"/>
                                </g:VerticalPanel>
                            </g:cell>
                        </g:HorizontalPanel>
                    </g:cell>
                    <g:cell width="10%">
                        <g:Label width="100%"/>
                    </g:cell>
                    <!--Правые кнопки ссылки-->
                    <g:cell horizontalAlignment="right">
                        <g:VerticalPanel width="180px" spacing="2">
                            <style:LinkButton ui:field="signersAnchor" text="Исполнитель и подписанты"
                                              img="resources/img/businessperson-16.png"
                                              title="Указать исполнителя и список подписантов налоговой формы"/>
                            <style:LinkButton ui:field="infoAnchor" text="История изменений"
                                              img="resources/img/exclamation_mark.png"
                                              title="Отобразить историю налоговой формы"/>
                            <style:LinkButton ui:field="printAnchor" text="Печать" img="resources/img/printer-16.png"
                                              title="Отобразить печатное представление документа"/>
                        </g:VerticalPanel>
                    </g:cell>

                </g:HorizontalPanel>

                <g:Label addStyleNames="{style.horSep}"/>

                <!--Панель кнопок-->

                <g:HorizontalPanel addStyleNames="{style.btnPanel}">
                    <g:cell>
                        <g:HorizontalPanel ui:field="addRemoveRowsBlock">
                            <style:LinkButton ui:field="addRowButton" text="Добавить строку" addStyleNames="{style.btnMarginRight}"
                                              img="resources/img/row-add.png" />
                            <style:LinkButton ui:field="removeRowButton" text="Удалить строку"
                                              img="resources/img/row-delete.png"/>
                            <g:Label addStyleNames="{style.verSep}"/>
                        </g:HorizontalPanel>
                    </g:cell>
                    <g:cell>
                        <g:HorizontalPanel>
                            <g:Button ui:field="checkButton" text="Проверить" addStyleNames="{style.btnMarginRight}"/>
                            <g:Button ui:field="recalculateButton" text="Рассчитать" addStyleNames="{style.btnMarginRight}"/>
                            <style:LeftBar ui:field="workflowButtons" marginRight="9" addStyleNames="{style.btnMarginRight}"/>
                            <g:Button ui:field="deleteFormButton" text="Удалить" addStyleNames="{style.btnMarginRight}"/>
                            <g:Button ui:field="originalVersionButton" text="Исходная версия"/>

                            <g:Label addStyleNames="{style.verSep}"/>
                        </g:HorizontalPanel>
                    </g:cell>
                    <g:cell>
                        <style:LinkButton ui:field="manualInputAnchor" text="Редактировать..."
                                          img="resources/img/pencil-16.png"
                                          title="Перейти в режим редактирования" addStyleNames="{style.btnMarginRight}"/>
                    </g:cell>
                    <g:cell>
                        <g:HorizontalPanel ui:field="saveCancelPanel">
                                <g:Button ui:field="saveButton" text="Сохранить" addStyleNames="{style.btnMarginRight}"/>
                                <g:Button ui:field="cancelButton" text="Выход"/>
                        </g:HorizontalPanel>
                    </g:cell>
                    <g:cell width="100%">
                        <g:Label width="100%"/>
                    </g:cell>
                    <g:cell horizontalAlignment="right">
                        <g:CheckBox ui:field="showCheckedColumns" addStyleNames="{style.showCheckedColumns}"
                                    value="true" text="Показывать контрольные поля" width="225px" height="22px"/>
                    </g:cell>
                </g:HorizontalPanel>


                <g:Label ui:field="lockInformation" visible="false"
                         addStyleNames="{lockInformationStyle.lockInformation}"/>

                <style:GenericDataGrid ui:field="formDataTable" addStyleNames="{style.table}"/>
                <pager:FlexiblePager ui:field="pager" addStyleNames="{style.pager}"
                                     location="CENTER" showFastForwardButton="false"
                                     fastForwardRows="0" showLastPageButton="true" type="formData"/>

            </fm:BodyContainer>
        </fm:body>
    </fm:MainContainer>

</ui:UiBinder>
