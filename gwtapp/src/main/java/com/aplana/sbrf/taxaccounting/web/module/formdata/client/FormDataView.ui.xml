<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
             xmlns:g="urn:import:com.google.gwt.user.client.ui"
             xmlns:style="urn:import:com.aplana.sbrf.taxaccounting.web.widget.style"
             xmlns:pager="urn:import:com.aplana.sbrf.taxaccounting.web.widget.pager"
             xmlns:fileuplod="urn:import:com.aplana.sbrf.taxaccounting.web.widget.fileupload"
             xmlns:fm="urn:import:com.aplana.gwt.client.form">

    <ui:style>

        .titleText {
            font-size: 14px !important;
            color: #636460;
            white-space: nowrap;
        }

        .titleText div {
            font-size: 14px !important;
        }

        .infoPanel {
            padding: 5px 25px 0 30px;
        }

        .editMode {
            color: #aeaeac;
        }

        .headerAttr {
            font-size: 12px;
            font-weight: bold;
            max-height: 54px;
            overflow: hidden;
        }

        .depAttr {
            line-height: 17px;
        }

        .headerAttrName {
            font-size: 12px;
            line-height: 17px;
        }

        .reportPeriodLabel {
            font-size: 12px;
            font-weight: bold;
            white-space: nowrap;
            text-overflow: ellipsis;
            -ms-text-overflow: ellipsis;
        }

        .depatmentBlock {
            max-width: 560px;
            min-width: 350px;
        }

        .centerBlock {
            padding-left: 5px;
        }

        .infoValuesBlock {
            min-width: 100px;
        }

        .btnPanel {
            padding-left: 7px;
            height: 22px;
        }

        .showCheckedColumns {
            font-size: 12px;
            white-space: nowrap;
            margin-left: 20px;
        }

        .corr, .showCheckedColumns {
            padding-right: 10px;
        }

        .table {
            position: absolute !important;
            bottom: 30px;
            right: 10px;
            left: 10px;
            top: 104px;     /*@see com.aplana.sbrf.taxaccounting.web.module.formdata.client.FormDataView.DEFAULT_TABLE_TOP_POSITION"*/
        }

        .tableFixed {
            position: relative !important;
        }

        .tableMain {
            position: absolute !important;
        }

        .pager {
            position: absolute;
            bottom: 0;
            right: 0;
        }

        .horSep {
            height: 1px;
            margin: 4px 9px;
            border-top: 1px solid #aeaeac;
        }

        .verSep {
            height: 22px;
            margin-right: 8px;
            border-right: 1px solid #aeaeac;
        }

        .btnMarginRight {
            margin-right: 9px;
        }

        .marginRight5 {
            margin-right: 5px;
        }

        .fontBold {
            font-weight: bold;
        }

        .versionSep {
            margin-right: 2px;
            margin-left: 2px;
        }

        .linkButtonPanel {
            overflow-x: hidden;
        }

        .printAnchor {
            padding-left: 14px;
            padding-right: 6px;
        }

    </ui:style>

    <ui:style field="lock">
        .lockInformation {
            height: 25px;   /*@see com.aplana.sbrf.taxaccounting.web.module.formdata.client.FormDataView.LOCK_INFO_BLOCK_HEIGHT*/
            line-height: 24px;
            background: #FFDC82;
            padding-left: 15px;
            margin: 2px;
            font-size: 14px;
            border: 1px solid #DBDBDB;

            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            -ms-text-overflow: ellipsis;
        }
    </ui:style>
    
    <ui:with field="formDataProvider" type="com.aplana.sbrf.taxaccounting.web.module.formdata.client.FormDataView"/>

    <fm:MainContainer>
        <fm:header>
            <fm:HeaderContainer>
                <fm:left>
                    <fm:Left>
                        <style:LeftBar marginRight="5" childValign="middle" height="100%">
                            <style:LinkAnchor title="Перейти к списку налоговых форм" ui:field="returnAnchor"
                                              disableImage="true" addStyleNames="{style.titleText}"/>
                            <g:Label text="—" addStyleNames="{style.titleText}"/>
                        </style:LeftBar>
                    </fm:Left>
                </fm:left>
                <fm:right>
                    <fm:Right>
                        <style:LeftBar marginRight="5" childValign="middle" height="100%">
                            <g:Label ui:field="editModeLabel" text="Режим редактирования"
                                     addStyleNames="{style.editMode}, {style.marginRight5}"/>
                            <fileuplod:FileUploadWidget ui:field="fileUploader" width="185px"/>
                            <style:DropdownButton ui:field="printAnchor" text="Формирование отчетов" img="resources/img/printer-16.png"
                                              title="Формирование отчето" panelStyleName="{style.printAnchor}"/>
                        </style:LeftBar>
                    </fm:Right>
                </fm:right>
                <fm:resizable>
                    <fm:Resizable>
                        <g:Label ui:field="title"/>
                    </fm:Resizable>
                </fm:resizable>
            </fm:HeaderContainer>
        </fm:header>

        <fm:body>
            <fm:BodyContainer>

                <g:HorizontalPanel width="100%" addStyleNames="{style.infoPanel}">
                    <!--Подразделение. Левая часть-->
                    <g:cell>
                        <g:HorizontalPanel spacing="2" height="58px" addStyleNames="{style.depatmentBlock}">
                            <g:cell width="95px">
                                <g:Label text="Подразделение:" addStyleNames="{style.headerAttrName}"/>
                            </g:cell>
                            <g:cell horizontalAlignment="left">
                                <g:Label ui:field="departmentIdLabel" addStyleNames="{style.headerAttr}, {style.depAttr}"/>
                            </g:cell>
                        </g:HorizontalPanel>
                    </g:cell>
                    <!--Инфо по форме. Середина-->
                    <g:cell horizontalAlignment="left" width="90%">
                        <g:HorizontalPanel ui:field="centerBlock" height="58px" addStyleNames="{style.centerBlock}" >
                            <g:cell width="145px" >
                                <g:VerticalPanel spacing="2" horizontalAlignment="right" width="145px">
                                    <g:Label ui:field="formKindTitle" text="Тип налоговой формы:" addStyleNames="{style.headerAttrName}"/>
                                    <g:Label text="Период:" addStyleNames="{style.headerAttrName}"/>
                                    <g:Label ui:field="comparativePeriodTitle" text="Период сравнения:" addStyleNames="{style.headerAttrName}"/>
                                    <g:Label text="Состояние:" addStyleNames="{style.headerAttrName}"/>
                                </g:VerticalPanel>
                            </g:cell>
                            <g:cell>
                                <g:VerticalPanel spacing="2" addStyleNames="{style.infoValuesBlock}">
                                    <g:Label ui:field="formKindLabel" addStyleNames="{style.headerAttr}, {style.depAttr} "/>
                                    <g:Label ui:field="reportPeriodLabel" addStyleNames="{style.reportPeriodLabel}, {style.depAttr}"/>
                                    <g:Label ui:field="comparativePeriodLabel" addStyleNames="{style.reportPeriodLabel}, {style.depAttr}"/>
                                    <g:Label ui:field="stateLabel" addStyleNames="{style.headerAttr}, {style.depAttr}"/>
                                </g:VerticalPanel>
                            </g:cell>
                        </g:HorizontalPanel>
                    </g:cell>
                    <g:cell width="10%">
                        <g:Label width="100%"/>
                    </g:cell>
                    <!--Правые кнопки ссылки-->
                    <g:cell horizontalAlignment="right">
                        <g:SimplePanel ui:field="linkButtonPanel" height="61px" addStyleNames="{style.linkButtonPanel}">
                            <g:VerticalPanel width="220px" spacing="3">
                                <style:LinkButton ui:field="signersAnchor" text="Параметры печатной формы"
                                                  img="resources/img/businessperson-16.png"
                                                  title="Указать параметры печатной формы"/>
                                <style:LinkButton ui:field="filesComments" text="Файлы и комментарии" img="resources/img/exclamation_mark.png"
                                                  title="Источники и приемники"/>
                                <style:LinkButton ui:field="sources" text="Источники и приемники" img="resources/img/source-target.png"
                                                  title="Источники и приемники"/>
                                <style:LinkButton ui:field="infoAnchor" text="История изменений"
                                                  img="resources/img/exclamation_mark.png"
                                                  title="Отобразить историю налоговой формы"/>
                            </g:VerticalPanel>
                        </g:SimplePanel>
                    </g:cell>

                </g:HorizontalPanel>

                <g:Label addStyleNames="{style.horSep}"/>

                <!--Панель кнопок-->

                <g:HorizontalPanel verticalAlignment="middle" addStyleNames="{style.btnPanel}">
                    <g:HorizontalPanel ui:field="addRemoveRowsBlock" verticalAlignment="middle" visible="false">
                        <style:LinkButton ui:field="addRowButton" text="Добавить строку" addStyleNames="{style.btnMarginRight}"
                                          img="resources/img/row-add.png"/>
                        <style:LinkButton ui:field="removeRowButton" text="Удалить строку"
                                          img="resources/img/row-delete.png" addStyleNames="{style.btnMarginRight}"/>
                        <g:Label addStyleNames="{style.verSep}"/>
                    </g:HorizontalPanel>
                    <g:HorizontalPanel>
                        <g:Button ui:field="checkButton" text="Проверить" addStyleNames="{style.btnMarginRight}" visible="false"/>
                        <g:Button ui:field="refreshButton" text="Обновить" addStyleNames="{style.btnMarginRight}" visible="false"/>
                        <g:Button ui:field="recalculateButton" text="Рассчитать" addStyleNames="{style.btnMarginRight}" visible="false"/>
                        <g:HorizontalPanel ui:field="workflowButtons" visible="false"/>
                        <g:Button ui:field="deleteFormButton" text="Удалить" addStyleNames="{style.btnMarginRight}" visible="false"/>
                        <g:Button ui:field="originalVersionButton" text="Исходная версия" visible="false"/>
                        <g:Button ui:field="consolidationButton" text="Консолидировать" visible="false"/>

                        <g:Label addStyleNames="{style.verSep}"/>
                    </g:HorizontalPanel>

                    <style:LinkButton ui:field="editAnchor" text="Редактировать..." addStyleNames="{style.btnMarginRight}"
                                      img="resources/img/pencil-16.png" title="Перейти в режим редактирования" visible="false"/>

                    <style:LinkButton ui:field="manualAnchor" text="Ручной ввод" addStyleNames="{style.btnMarginRight}"
                                      img="resources/img/pencil-16.png" title="Перейти в режим редактирования" visible="false"/>

                    <g:HorizontalPanel ui:field="saveCancelPanel" visible="false">
                        <g:Button ui:field="saveButton" text="Сохранить" addStyleNames="{style.btnMarginRight}"/>
                        <g:Button ui:field="exitAndSaveButton" text="Выход (без отмены операций)" addStyleNames="{style.btnMarginRight}" visible="false"/>
                        <g:Button ui:field="cancelButton" text="Выход" addStyleNames="{style.btnMarginRight}"/>
                    </g:HorizontalPanel>

                    <g:cell width="100%">
                        <style:LinkButton title="Поиск" ui:field="search" img="resources/img/search.png" width="70px" text="Поиск"/>
                    </g:cell>

                    <g:cell>
                        <g:Button ui:field="fillPreviousButton" text="Заполнить предыдущими значениями" visible="false" addStyleNames="{style.btnMarginRight}"/>
                    </g:cell>

                    <g:cell visible="false">
                        <style:LinkButton ui:field="correctionButton" text="Показать изменения" disableImage="true" addStyleNames="{style.corr}" visible="false"/>
                    </g:cell>

                    <g:CheckBox ui:field="showCheckedColumns" addStyleNames="{style.showCheckedColumns}"
                                value="true" text="Показывать контрольные поля" visible="false"/>

                    <g:HorizontalPanel verticalAlignment="middle" ui:field="versionBlock" visible="false">
                        <g:Label addStyleNames="{style.verSep}"/>
                        <g:Label text="Версия:" width="48px"/>
                        <style:LinkButton ui:field="manualVersionLink" text="ручного ввода"
                                          title="Перейти к версии ручного ввода" disableImage="true"/>
                        <g:Label ui:field="manualVersionLabel" wordWrap="false" text="ручного ввода" addStyleNames="{style.fontBold}"/>
                        <g:Label text="/" addStyleNames="{style.versionSep}"/>
                        <style:LinkButton ui:field="autoVersionLink" text="автоматическая" addStyleNames="{style.btnMarginRight}"
                                          title="Перейти к автоматической версии" disableImage="true"/>
                        <g:Label ui:field="autoVersionLabel" text="автоматическая" addStyleNames="{style.fontBold}, {style.btnMarginRight}"/>
                    </g:HorizontalPanel>

                    <style:LinkButton ui:field="deleteManualAnchor" text="Удалить версию ручного ввода" addStyleNames="{style.btnMarginRight}"
                                      img="resources/img/row-delete.png" title="Удалить версию ручного ввода" visible="false"/>

                </g:HorizontalPanel>

                <g:Label ui:field="lockInformation" visible="false"  addStyleNames="{lock.lockInformation}"/>

                <g:ResizeLayoutPanel ui:field="tableWrapper" addStyleNames="{style.table}">
                    <g:LayoutPanel>
                        <g:layer top="0px" bottom="0px" width="40px" left="0px" addStyleNames="{style.tableFixed}">
                            <style:GenericDataGrid ui:field="formDataTableFixed" width="100%" height="100%"/>
                        </g:layer>
                        <g:layer top="0px" bottom="0px" left="40px" right="0px" addStyleNames="{style.tableMain}">
                            <style:GenericDataGrid ui:field="formDataTable" width="100%" height="100%"/>
                        </g:layer>
                    </g:LayoutPanel>
                </g:ResizeLayoutPanel>

                <pager:FlexiblePager ui:field="pager" addStyleNames="{style.pager}"
                                     location="CENTER" showFastForwardButton="false"
                                     fastForwardRows="0" showLastPageButton="true" type="formData"/>

            </fm:BodyContainer>
        </fm:body>
    </fm:MainContainer>

</ui:UiBinder>
