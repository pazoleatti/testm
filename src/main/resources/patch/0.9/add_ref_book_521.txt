/**
# Описание:
	Меняет статус экземпляра декларации

# Инструкция:
	1. Войти в приложение;
	2. Перейти на страницу, адрес которой необходимо задать в адресной строке. 
	   Адрес страницы формируется из текущего адреса посредством замены его окончания на:
		   .../gwtapp/#!scriptExecution
	   Например так должно получиться: 
		   https://172.16.127.21/taxaccounting-next2/gwtapp/#!scriptExecution;
	5. На открывшейся странице нажать кнопку "Выполнить"; 
*/
try { 
	def sqls = """
		insert into ref_book (id, name, visible, type, read_only, region_attribute_id, is_versioned) values (521, 'История изменения категории ВЗЛ', 0, 0, 0, null, 0);
		insert into ref_book_attribute(id, ref_book_id, name, alias, type, ord, reference_id, attribute_id, visible, precision, width, required, is_unique, sort_order, format, read_only, max_length) values (5230, 521, 'ВЗЛ',            'JUR_PERSON',    4,  1,  520,  5201,  1,  null,  10,  1,  0,  null,  null,  0,  null);
		insert into ref_book_attribute(id, ref_book_id, name, alias, type, ord, reference_id, attribute_id, visible, precision, width, required, is_unique, sort_order, format, read_only, max_length) values (5231, 521, 'Категория ВЗЛ',        'CATEGORY',      4,  2,  506,  5061,  1,  null,  10,  1,  0,  null,  null,  0,  null);
		insert into ref_book_attribute(id, ref_book_id, name, alias, type, ord, reference_id, attribute_id, visible, precision, width, required, is_unique, sort_order, format, read_only, max_length) values (5232, 521, 'Код формы',           'FORM_DATA_ID',   2,   3,   null,   null,   1,   0,     10, 1,   0,   null,   null,   0,   18);
		insert into ref_book_attribute(id, ref_book_id, name, alias, type, ord, reference_id, attribute_id, visible, precision, width, required, is_unique, sort_order, format, read_only, max_length) values (5233, 521, 'Дата изменения',        'CHANGE_DATE',    3,  4,  null,  null,  1,  null,  10,  1,  0,  null,  1,    0,  null);
		insert into ref_book_attribute(id, ref_book_id, name, alias, type, ord, reference_id, attribute_id, visible, precision, width, required, is_unique, sort_order, format, read_only, max_length) values (5234, 521, 'Код состояния',         'STATE',       2,   5,   null,   null,   1,   0,     10, 1,   0,   null,   null,   0,   9)
	"""
	sqls.split(";").each { sql ->
		namedParameterJdbcTemplate.update(sql, [:])
	}
} catch (Exception ex) {
    logger.error("Ошибка: ${ex.getLocalizedMessage()}. Все действия, выполненные скриптом, были отменены")
}